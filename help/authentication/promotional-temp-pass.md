---
title: プロモーション一時パス
description: プロモーション一時パス
exl-id: 705c1ba9-0430-4e3b-add1-d9e4da3f82d1
source-git-commit: c88fba76b1805dd88fccb68b13bde11b1b8ea181
workflow-type: tm+mt
source-wordcount: '1510'
ht-degree: 0%

---

# プロモーション一時パス {#promotional-temp-pass}

>[!NOTE]
>
>このページのコンテンツは情報提供のみを目的としています。 この API を使用するには、Adobeから現在のライセンスが必要です。 無許可の使用は許可されていません。

## 機能の概要 {#feature-summary}

プロモーションの一時パスを使用すると、プログラマーは、MVPD のアカウント資格情報を持たないユーザーに対して、保護されたコンテンツへの一時的なアクセスを提供できます。

プロモーション Temp Pass は、ユーザーが有効な識別情報（メールアドレスなど）をプログラマーに提供した後、 **事前に定義された期間の様々な VOD タイトルの事前定義済みの数**.

>[!IMPORTANT]
>
>Adobeには、個人を特定できる情報（PII）は格納されません。 したがって、プログラマーは、Adobe Pass Authentication API に関して一意のユーザーが提供した情報に対してハッシュを設定する必要があります。

プロモーション用 Temp Pass は、 [一時パス](/help/authentication/temp-pass.md) 機能。すべての一時パス機能が含まれます。

事前定義済みの VOD タイトルの最大数または事前定義済みの時間を超えると、Adobe Pass Authentication Server から認証トークンがクリアされるまで、同じデバイス上のコンテンツや、同じユーザー識別情報（メールアドレスなど）を使用してコンテンツにアクセスできなくなります。

>[!NOTE]
>
>Temp Pass は Premium ワークフローパッケージの一部です。 この機能の使用に興味がある場合は、Adobe Passの営業担当にお問い合わせください。

## 一時パスと販促の一時パスの比較 {#tp-ptp-comparison}

| 一時パス | プロモーション一時パス |
|----------------------------------|----------------------------------------------------------------------------------------|
| コンテンツへのアクセス <ul><li>時間ベース</li></ul> | コンテンツへのアクセス <ul><li>時間ベース</li><li>リソースの数に基づく</li></ul> |
| アクセスのセキュリティ基準 <ul><li>デバイス ID</li></ul> | セキュリティ基準 <ul><li>デバイス ID</li><li>提供されたユーザー識別情報（メールなど）に対するハッシュ</li></ul> |
| 利用可能なクライアントエラー API | 利用可能なクライアントエラー API |
| 使用可能なリセット / パージ | 使用可能なリセット / パージ |

## 機能の詳細 {#feature-details}

この機能を使用すると、プログラマーのアプリケーションでメールアドレスなどの一意の情報を指定した後、特定のデバイス（電話およびタブレット）からプロモーションコンテンツにアクセスできます。

プログラマーは、認証および承認 API に関するユーザーの PII に対するハッシュを提供します。 このハッシュは、ユーザーとデバイスを識別する一意のキーを生成する際に、デバイス ID と共に使用されます。

デバイス ID と提供された情報に基づき、以下のロジックに従って、Adobe Pass Authentication はユーザーが新しい体験版に参加しているか、既存の体験版に参加しているかを判断します。

* ユーザーが提供した情報（メールなど）に対する新しいハッシュ、新しいデバイス ID => 新しい体験版
* 既存のハッシュオーバーユーザーが提供した情報（メールなど）、新しいデバイス ID => 既存の体験版（既存のハッシュオーバーユーザーが提供した情報（メールなど））
* ユーザーが指定した情報（メールなど）に対する新しいハッシュ。既存のデバイス ID => 既存の体験版（既存のデバイス ID を使用）
* ユーザーが指定した情報（メールなど）に対する既存のハッシュ、既存のデバイス ID => 既存の体験版

>[!NOTE]
>ユーザーが指定した情報の検証とハッシュ化は、Adobeではなく、プログラマーが処理します。

**プロモーションの一時パス機能は、次のプロパティに基づいて設定できます。**

* ユーザーが指定した情報キー（メールなど）
* ユーザーが使用できるリソースの数
* TTL - ユーザーが設定された数のリソースを使用できる時間間隔

### ユーザーメタデータ {#user-metadata}

プログラマーのアプリケーションの実装を容易にするために、次の手順を実行します **ユーザーメタデータ情報が公開されます** プロモーションの一時パスで、対応するキーを使用します（キーをアクティブにするには、tve-support@adobe.comにお問い合わせください）。

* **remaining_resources**：現在のユーザーが使用できる残りのリソースの数
* **used_assets**：現在のユーザーが既に消費したリソースのリスト
* **expiration_date**：現在のユーザーの有効期限

### 表示時間はどのように計算されますか？ {#compute-viewing-time}

一時パスが有効なままである時間は、ユーザーがプログラマーのアプリケーションでコンテンツの表示に費やした時間とは相関しません。 プロモーションの一時パスを介して承認を求める最初のユーザーリクエスト時に、プログラマーが指定した TTL （デュレーション時間間隔）に最初の現在のリクエスト時間を追加することで、有効期限が計算されます。

### 認証と承認 {#authn-authz}

プロモーションの一時パスフローの場合、認証と承認は実際の MVPD と通信しません。 **すべての認証リクエストが成功します** 次のすべての条件を満たす場合：

* 認証トークンは、指定されたリソースに対して有効です
* の数 **used_assets** は、プログラマーが設定した制限を下回る
* **expiration_date** 値が現在の日付より後です。

### プリフライト挙動 {#preflight-beh}

プロモーションの Temp Pass MVPD に対してプリフライトまたは事前認証リクエストが行われた場合、返される対応するプリフライト応答には、プリフライトが成功したものとして、プリフライトリクエストからのリソースのリスト全体が含まれます。

この背後にあるロジックは、プロモーションの一時パスの認証条件が、特定のリソースではなく、時間とリソース数の制限に基づいていることです。 具体的には、時間の制約が満たされ、リソースの上限を超えていない限り、呼び出し元のリソースは許可されます。

### SSO {#sso}

「要求者ごとの認証」が有効化されているプロモーション一時パスのインスタンスに対しては、SSO が有効化されていません。 つまり、ユーザーがアプリケーション A から、同じプロモーション一時パスに統合されている別のアプリケーション B に切り替えても、ユーザーは自動的にログインしません。

### ログアウト {#logout}

デバイス上のすべてのトークンは、ログアウト時に削除されます。 したがって、プロモーション用の一時パスから通常のユーザー選択 MVPD に切り替える場合は、この実装に依存しないでください。 を使用することをお勧めします。 `setSelectedProvider(null)` アプリケーションの状態をクリアし、認証フローを再開します。これにより、ユーザーエクスペリエンスが向上します。

### プロモーション一時パスのフロー図 {#promo-tempass-flowdia}

![プロモーション一時パスのフロー図](assets/promo-temp-pass-flow.png)

*図：プロモーション一時パスフロー*

## プロモーション一時パスの実装 {#impl-promo-tempass}

プロモーションの一時パスには、次のクライアントサイド機能が必要です。

* **ユーザー識別情報（例：メールアドレスの伝播）** （認証および承認フローでのユーザーのメールアドレスの送信）。 メールは、Adobe Pass Authentication が認証トークンと認証トークンをバインドするために必要です（の場合と同様） `device_ID`（すべての呼び出しで必須）。
* **認証を強制** - ユーザーが既に認証されている場合に、プログラマーが認証フローを強制的に実行できるようにする。 この機能は、ユーザーメタデータの更新（ユーザーメタデータキー）を強制するために必要です **used_assets** アプリケーションが起動されるたびに、使用可能なリソースの数が含まれます。 ユーザーは複数のデバイスにログインできるので、アプリの起動時にデバイスに存在するユーザーメタデータは信頼できないので、その特定のユーザーの現在の状態（メールアドレスで識別）を反映するには、メタデータを更新する必要があります。


>[!IMPORTANT]
>強制認証は、iOSおよび Android でのみ可能です。
>Adobe Pass認証には、X 分経過後にフリーストリーミングを停止するメカニズムが組み込まれていません。 Adobe Pass認証の発行を停止します **認証** および **ショートメディア** ユーザーが Y 個の空きリソースを消費するとトークンが生成されます。 プロモーションの一時パスの有効期限が切れた後は、アクセスを制限するプログラマー次第です。

## セキュリティ {#security}

>[!IMPORTANT]
>Adobeには、個人を特定できる情報（PII）は格納されません。 したがって、プログラマーは、Adobe Pass Authentication API に関して一意のユーザーが提供した情報に対してハッシュを設定する必要があります。

**ユーザー識別情報のハッシュ**

Adobeでは、を使用することをお勧めします **SHA-2** 家族又はその特定 **SHA-256**, **SHA-512** Adobeに送信される前のデータに対して関数を実行します。

例： **SHA-256** 超過 **「user@domain.com」** 等しい **&quot;f7ee5ec7312165148b69fcca1d29075b14b8aef0b5048a332b18b88d09069fb7&quot;**.

## プロモーション一時パスのリセットまたはパージ {#reset-promo-tempass}

一部のビジネス・ルールでは、プロモーション一時パスの定期的なパージが必要です。 これを行うために、Adobe Pass認証はプログラマーに次の機能を提供します *パブリック* web API。以下で説明します。

| `DELETE https://mgmt.auth.adobe.com/reset-tempass/v2/reset` |
|----|
| <ul><li>プロトコル： **https**</li><li>ホスト：<ul><li>リリース： **mgmt.auth.adobe.com**</li><li>前提条件： **mgmt-prequal.auth.adobe.com**</li></ul></li><li>パス： **/reset-tempass/v2/reset**</li><li>クエリパラメーター： **device_id=all&amp;requestor_id=THE_REQUESTOR_ID&amp;mvpd_id=THE_TEMPASS_MVPD_ID**</li><li>ヘッダー：ApiKey: **1232293681726481**</li> <li>応答：<ul><li>成功： **HTTP 204**</li><li>失敗： **HTTP 400** 誤ったリクエストの場合、 **HTTP 401** apiKey が指定されていない場合、 **HTTP 403** apiKey が無効な場合</li></ul></li></ul> |

一時パスをパージする要件に加えて、プロモーションの一時パスでは、次のように送信されたユーザー識別情報のハッシュを使用します **generic_data** （パージの認証と承認について）。

JSON 全体ではなく、ハッシュが送信されます。

```cURL
$ curl -X DELETE -H "Authorization:Bearer H4j7cF3GtJX81BrsgDa10GwSizVz" "https://mgmt.auth.adobe.com/reset-tempass/v2.1/reset/generic?key=f7ee5ec7312165148b69fcca1d29075b14b8aef0b5048a332b18b88d09069fb7&requestor_id=REF&mvpd_id=FlexibleTempPass"
```

### サポートされるクライアント {#supported-clients}

| Adobe Pass認証クライアント | プロモーション一時パス | リセットツール | 専用の応答コード/クライアントエラーをサポート |
|:--------------------------------------:|:---------------------:|:----------:|:-----------------------------------------------:|
| JS アクセス イネーブラ | はい | はい | 対応（v 3.0.0 以降） |
| ネイティブクライアント iOS | はい | はい | 対応（v 1.10 以降） |
| ネイティブクライアント Android | はい | はい | はい |
| クライアントレス API | はい | はい | 不可 |


## 制限事項 {#limitations}

ここでは、プロモーション一時パスの現在の実装に適用される制限について説明します。

### クライアントレス {#lim-clientless}

**一意のデバイス ID を持たないスマートデバイス**

すべてのスマートデバイスアプリが一意のデバイス ID を提供できるわけではありません。 1 つがない場合、Adobe Pass認証は、Device Registration Code Service によって生成された UUID を一意のAdobe ID として使用できます。 つまり、ユーザーがログアウトすると、認証トークンと認証トークンが削除されます。 ユーザーが再度認証を試みると、今回は別のユーザー情報（メールなど）を使用してユーザーが再度認証を行うことができます。 Adobeでは、システムを「騙す」ことなく、新しいユーザーが体験版をリクエストするか既存の体験版をリクエストするかを判断するロジックを追加する UI フローを追加することをお勧めします。

**一時パスのリセット/パージ**

クライアントレスの一時パスのリセットは、Xbox360 と Xbox One の特定のケースでは利用できません。これらのプラットフォームでは追加のデバイス ID 解析が必要で、一時パスのリセット ツールでは利用できないからです。

<!--
>[!RELATEDINFORMATION]
>
>* [Preflight Authorization](/help/authentication/preflight-authz.md)
-->
